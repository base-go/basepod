import{e as P,U as q,k as F,l as k,h as v,c as d,o as i,a as t,p as b,b as m,d as $,i as s,t as n,F as w,r as C,f as z,w as _,g as R,j as W,q as Y,s as G}from"./BLG7DAKw.js";import{_ as H,$ as J,u as T}from"./Bn6BUJbn.js";import{a as K,_ as Q}from"./2AAiZstO.js";import{_ as X}from"./C5cGch4a.js";import"./CTAlE1ge.js";import"./BGXJoGEM.js";const Z={class:"mb-6"},ee={class:"text-gray-500 dark:text-gray-400"},te={key:0,class:"text-sm ml-2"},se={class:"space-y-8"},ae={class:"text-lg font-medium mb-4"},oe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ne={class:"flex items-start gap-4"},le={class:"flex-shrink-0 w-12 h-12 bg-primary-100 dark:bg-primary-900 rounded-lg flex items-center justify-center"},re={class:"flex-1 min-w-0"},ie={class:"font-medium"},de={class:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2"},me={class:"mt-2 flex items-center gap-2"},ce={class:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded"},pe={class:"text-xs text-gray-400"},ue={key:0,class:"text-center py-12"},fe={class:"space-y-4"},_e={key:0,class:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},ye={class:"font-medium"},ge={class:"text-sm text-gray-500"},ve={class:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-800 rounded-md font-mono text-sm"},xe={class:"text-gray-500"},be={key:1},he={class:"space-y-1"},ke={class:"flex justify-end gap-2"},Te=P({__name:"templates",async setup($e){let c,x;const D=q(),{data:p}=([c,x]=F(()=>T("/templates")),c=await c,x(),c),{data:u}=([c,x]=F(()=>T("/system/config")),c=await c,x(),c),y=k(!1),o=k(null),g=k({name:"",enableSSL:!1}),h=v(()=>{if(!g.value.name)return"";const a=g.value.name.toLowerCase().replace(/[^a-z0-9-]/g,"-");return u.value?.domain?.base?`${a}.${u.value.domain.base}`:`${a}${u.value?.domain?.suffix||".local"}`}),V=v(()=>u.value?.domain?.base?`app-name.${u.value.domain.base}`:`app-name${u.value?.domain?.suffix||".local"}`),A=v(()=>u.value?.domain?.base?"https://":"http://"),B=v(()=>{if(!p.value?.templates)return[];const a=new Set(p.value.templates.map(e=>e.category));return Array.from(a)}),N=v(()=>{if(!p.value?.templates)return{};const a={};for(const e of p.value.templates){const f=e.category;a[f]||(a[f]=[]),a[f].push(e)}return a}),j={database:"Databases",admin:"Admin Tools",webserver:"Web Servers",cms:"CMS / Apps",devtools:"Dev Tools",communication:"Communication",automation:"Automation",framework:"Frameworks"};function L(a){o.value=a,g.value={name:a.id,enableSSL:!1},y.value=!0}async function M(){if(o.value)try{await J(`/templates/${o.value.id}/deploy`,{method:"POST",body:g.value}),y.value=!1,D.add({title:`${o.value.name} deployed`,color:"success"}),G("/apps")}catch(a){const e=a&&typeof a=="object"&&"data"in a?a.data?.error:"An unexpected error occurred";D.add({title:"Failed to deploy",description:e,color:"error"})}}return(a,e)=>{const f=R,O=H,E=Q,S=K,U=W,I=X;return i(),d("div",null,[t("div",Z,[e[4]||(e[4]=t("h2",{class:"text-xl font-semibold"},"One-Click Apps",-1)),t("p",ee,[e[3]||(e[3]=$(" Deploy popular apps with a single click ",-1)),s(p)?.system?(i(),d("span",te,"("+n(s(p).system.platform)+")",1)):b("",!0)])]),t("div",se,[(i(!0),d(w,null,C(s(B),l=>(i(),d("div",{key:l},[t("h3",ae,n(j[l]||l),1),t("div",oe,[(i(!0),d(w,null,C(s(N)[l],r=>(i(),z(O,{key:r.id,class:"hover:ring-2 hover:ring-primary-500 cursor-pointer transition-all",onClick:we=>L(r)},{default:_(()=>[t("div",ne,[t("div",le,[m(f,{name:r.icon,class:"w-6 h-6 text-primary-500"},null,8,["name"])]),t("div",re,[t("h4",ie,n(r.name),1),t("p",de,n(r.description),1),t("div",me,[t("code",ce,n(r.image),1),t("span",pe,":"+n(r.port),1)])])])]),_:2},1032,["onClick"]))),128))])]))),128))]),s(p)?.templates?.length?b("",!0):(i(),d("div",ue,[m(f,{name:"i-heroicons-cube-transparent",class:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e[5]||(e[5]=t("h3",{class:"text-lg font-medium mb-2"},"No templates available",-1)),e[6]||(e[6]=t("p",{class:"text-gray-500"},"Check back later for one-click app templates",-1))])),m(I,{open:s(y),"onUpdate:open":e[2]||(e[2]=l=>Y(y)?y.value=l:null),title:`Deploy ${s(o)?.name}`},{body:_(()=>[t("div",fe,[s(o)?(i(),d("div",_e,[m(f,{name:s(o).icon,class:"w-8 h-8 text-primary-500"},null,8,["name"]),t("div",null,[t("div",ye,n(s(o).name),1),t("div",ge,n(s(o).image),1)])])):b("",!0),m(S,{label:"App Name"},{default:_(()=>[m(E,{modelValue:s(g).name,"onUpdate:modelValue":e[0]||(e[0]=l=>s(g).name=l),placeholder:"my-app"},null,8,["modelValue"])]),_:1}),m(S,{label:"Domain"},{default:_(()=>[t("div",ve,[t("span",xe,n(s(A)),1),t("span",null,n(s(h)||s(V)),1)]),e[7]||(e[7]=t("p",{class:"text-xs text-gray-500 mt-1"},"Auto-assigned based on app name",-1))]),_:1}),s(o)&&Object.keys(s(o).env).length?(i(),d("div",be,[e[8]||(e[8]=t("div",{class:"text-sm font-medium mb-2"},"Default Environment Variables",-1)),t("div",he,[(i(!0),d(w,null,C(s(o).env,(l,r)=>(i(),d("div",{key:r,class:"text-sm bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded font-mono"},n(r)+"="+n(r==="url"&&s(h)?`${s(A)}${s(h)}`:l),1))),128))]),e[9]||(e[9]=t("p",{class:"text-xs text-gray-500 mt-2"}," You can modify these in the app settings after deployment ",-1))])):b("",!0)])]),footer:_(()=>[t("div",ke,[m(U,{variant:"ghost",onClick:e[1]||(e[1]=l=>y.value=!1)},{default:_(()=>[...e[10]||(e[10]=[$("Cancel",-1)])]),_:1}),m(U,{onClick:M},{default:_(()=>[...e[11]||(e[11]=[$("Deploy",-1)])]),_:1})])]),_:1},8,["open","title"])])}}});export{Te as default};
